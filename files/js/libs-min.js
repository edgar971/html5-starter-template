
;window.Modernizr=function(e,t,n){function r(e){g.cssText=e}function o(e,t){return typeof e===t}function i(e,t){return!!~(""+e).indexOf(t)}function a(e,t){for(var r in e){var o=e[r];if(!i(o,"-")&&g[o]!==n)return"pfx"==t?o:!0}return!1}function c(e,t,r){for(var i in e){var a=t[e[i]];if(a!==n)return r===!1?e[i]:o(a,"function")?a.bind(r||t):a}return!1}function s(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+E.join(r+" ")+r).split(" ");return o(t,"string")||o(t,"undefined")?a(i,t):(i=(e+" "+C.join(r+" ")+r).split(" "),c(i,t,n))}function u(){p.input=function(n){for(var r=0,o=n.length;o>r;r++)S[n[r]]=n[r]in b;return S.list&&(S.list=!!t.createElement("datalist")&&!!e.HTMLDataListElement),S}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),p.inputtypes=function(e){for(var r,o,i,a=0,c=e.length;c>a;a++)b.setAttribute("type",o=e[a]),r="text"!==b.type,r&&(b.value=w,b.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(o)&&b.style.WebkitAppearance!==n?(v.appendChild(b),i=t.defaultView,r=i.getComputedStyle&&"textfield"!==i.getComputedStyle(b,null).WebkitAppearance&&0!==b.offsetHeight,v.removeChild(b)):/^(search|tel)$/.test(o)||(r=/^(url|email)$/.test(o)?b.checkValidity&&b.checkValidity()===!1:b.value!=w)),$[e[a]]=!!r;return $}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var l,d,f="2.8.3",p={},m=!0,v=t.documentElement,h="modernizr",y=t.createElement(h),g=y.style,b=t.createElement("input"),w=":)",x=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),T="Webkit Moz O ms",E=T.split(" "),C=T.toLowerCase().split(" "),P={svg:"http://www.w3.org/2000/svg"},k={},$={},S={},j=[],A=j.slice,L=function(e,n,r,o){var i,a,c,s,u=t.createElement("div"),l=t.body,d=l||t.createElement("body");if(parseInt(r,10))for(;r--;)c=t.createElement("div"),c.id=o?o[r]:h+(r+1),u.appendChild(c);return i=["&#173;",'<style id="s',h,'">',e,"</style>"].join(""),u.id=h,(l?u:d).innerHTML+=i,d.appendChild(u),l||(d.style.background="",d.style.overflow="hidden",s=v.style.overflow,v.style.overflow="hidden",v.appendChild(d)),a=n(u,e),l?u.parentNode.removeChild(u):(d.parentNode.removeChild(d),v.style.overflow=s),!!a},N=function(){function e(e,i){i=i||t.createElement(r[e]||"div"),e="on"+e;var a=e in i;return a||(i.setAttribute||(i=t.createElement("div")),i.setAttribute&&i.removeAttribute&&(i.setAttribute(e,""),a=o(i[e],"function"),o(i[e],"undefined")||(i[e]=n),i.removeAttribute(e))),i=null,a}var r={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return e}(),z={}.hasOwnProperty;d=o(z,"undefined")||o(z.call,"undefined")?function(e,t){return t in e&&o(e.constructor.prototype[t],"undefined")}:function(e,t){return z.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=A.call(arguments,1),r=function(){if(this instanceof r){var o=function(){};o.prototype=t.prototype;var i=new o,a=t.apply(i,n.concat(A.call(arguments)));return Object(a)===a?a:i}return t.apply(e,n.concat(A.call(arguments)))};return r}),k.flexbox=function(){return s("flexWrap")},k.flexboxlegacy=function(){return s("boxDirection")},k.canvas=function(){var e=t.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")},k.canvastext=function(){return!!p.canvas&&!!o(t.createElement("canvas").getContext("2d").fillText,"function")},k.webgl=function(){return!!e.WebGLRenderingContext},k.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:L(["@media (",x.join("touch-enabled),("),h,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=9===e.offsetTop}),n},k.geolocation=function(){return"geolocation"in navigator},k.hashchange=function(){return N("hashchange",e)&&(t.documentMode===n||t.documentMode>7)},k.history=function(){return!!e.history&&!!history.pushState},k.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},k.hsla=function(){return r("background-color:hsla(120,40%,100%,.5)"),i(g.backgroundColor,"rgba")||i(g.backgroundColor,"hsla")},k.multiplebgs=function(){return r("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(g.background)},k.borderradius=function(){return s("borderRadius")},k.boxshadow=function(){return s("boxShadow")},k.cssanimations=function(){return s("animationName")},k.csstransforms=function(){return!!s("transform")},k.csstransforms3d=function(){var e=!!s("perspective");return e&&"webkitPerspective"in v.style&&L("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t){e=9===t.offsetLeft&&3===t.offsetHeight}),e},k.csstransitions=function(){return s("transition")},k.fontface=function(){var e;return L('@font-face {font-family:"font";src:url("https://")}',function(n,r){var o=t.getElementById("smodernizr"),i=o.sheet||o.styleSheet,a=i?i.cssRules&&i.cssRules[0]?i.cssRules[0].cssText:i.cssText||"":"";e=/src/i.test(a)&&0===a.indexOf(r.split(" ")[0])}),e},k.video=function(){var e=t.createElement("video"),n=!1;try{(n=!!e.canPlayType)&&(n=new Boolean(n),n.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(r){}return n},k.audio=function(){var e=t.createElement("audio"),n=!1;try{(n=!!e.canPlayType)&&(n=new Boolean(n),n.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(r){}return n},k.localstorage=function(){try{return localStorage.setItem(h,h),localStorage.removeItem(h),!0}catch(e){return!1}},k.applicationcache=function(){return!!e.applicationCache},k.svg=function(){return!!t.createElementNS&&!!t.createElementNS(P.svg,"svg").createSVGRect},k.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==P.svg};for(var M in k)d(k,M)&&(l=M.toLowerCase(),p[l]=k[M](),j.push((p[l]?"":"no-")+l));return p.input||u(),p.addTest=function(e,t){if("object"==typeof e)for(var r in e)d(e,r)&&p.addTest(r,e[r]);else{if(e=e.toLowerCase(),p[e]!==n)return p;t="function"==typeof t?t():t,"undefined"!=typeof m&&m&&(v.className+=" "+(t?"":"no-")+e),p[e]=t}return p},r(""),y=b=null,p._version=f,p._prefixes=x,p._domPrefixes=C,p._cssomPrefixes=E,p.hasEvent=N,p.testProp=function(e){return a([e])},p.testAllProps=s,p.testStyles=L,v.className=v.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(m?" js "+j.join(" "):""),p}(this,this.document);
;!function(i){}(this);
;/*!
 * Justified Gallery - v3.5.4
 * http://miromannino.github.io/Justified-Gallery/
 * Copyright (c) 2015 Miro Mannino
 * Licensed under the MIT license.
 */
!function(a){a.fn.justifiedGallery=function(b){function c(a,b,c){var d;return d=a>b?a:b,100>=d?c.settings.sizeRangeSuffixes.lt100:240>=d?c.settings.sizeRangeSuffixes.lt240:320>=d?c.settings.sizeRangeSuffixes.lt320:500>=d?c.settings.sizeRangeSuffixes.lt500:640>=d?c.settings.sizeRangeSuffixes.lt640:c.settings.sizeRangeSuffixes.lt1024}function d(a,b){return-1!==a.indexOf(b,a.length-b.length)}function e(a,b){return a.substring(0,a.length-b.length)}function f(a,b){var c=!1;for(var e in b.settings.sizeRangeSuffixes)if(0!==b.settings.sizeRangeSuffixes[e].length){if(d(a,b.settings.sizeRangeSuffixes[e]))return b.settings.sizeRangeSuffixes[e]}else c=!0;if(c)return"";throw"unknown suffix for "+a}function g(a,b,d,g){var h=a.match(g.settings.extension),i=null!=h?h[0]:"",j=a.replace(g.settings.extension,"");return j=e(j,f(j,g)),j+=c(b,d,g)+i}function h(b){var c=a(b.currentTarget).find(".caption");b.data.settings.cssAnimation?c.addClass("caption-visible").removeClass("caption-hidden"):c.stop().fadeTo(b.data.settings.captionSettings.animationDuration,b.data.settings.captionSettings.visibleOpacity)}function i(b){var c=a(b.currentTarget).find(".caption");b.data.settings.cssAnimation?c.removeClass("caption-visible").removeClass("caption-hidden"):c.stop().fadeTo(b.data.settings.captionSettings.animationDuration,b.data.settings.captionSettings.nonVisibleOpacity)}function j(a,b,c){c.settings.cssAnimation?(a.addClass("entry-visible"),b()):a.stop().fadeTo(c.settings.imagesAnimationDuration,1,b)}function k(a,b){b.settings.cssAnimation?a.removeClass("entry-visible"):a.stop().fadeTo(0,0)}function l(a){var b=a.find("> img");return 0===b.length&&(b=a.find("> a > img")),b}function m(b,c,d,e,f,k,m){function n(){p!==q&&o.attr("src",q)}var o=l(b);o.css("width",e),o.css("height",f),o.css("margin-left",-e/2),o.css("margin-top",-f/2),b.width(e),b.height(k),b.css("top",d),b.css("left",c);var p=o.attr("src"),q=g(p,e,f,m);o.one("error",function(){o.attr("src",o.data("jg.originalSrc"))}),"skipped"===o.data("jg.loaded")?x(p,function(){j(b,n,m),o.data("jg.loaded",!0)}):j(b,n,m);var r=b.data("jg.captionMouseEvents");if(m.settings.captions===!0){var s=b.find(".caption");if(0===s.length){var t=o.attr("alt");"undefined"==typeof t&&(t=b.attr("title")),"undefined"!=typeof t&&(s=a('<div class="caption">'+t+"</div>"),b.append(s))}0!==s.length&&(m.settings.cssAnimation||s.stop().fadeTo(m.settings.imagesAnimationDuration,m.settings.captionSettings.nonVisibleOpacity),"undefined"==typeof r&&(r={mouseenter:h,mouseleave:i},b.on("mouseenter",void 0,m,r.mouseenter),b.on("mouseleave",void 0,m,r.mouseleave),b.data("jg.captionMouseEvents",r)))}else"undefined"!=typeof r&&(b.off("mouseenter",void 0,m,r.mouseenter),b.off("mouseleave",void 0,m,r.mouseleave),b.removeData("jg.captionMouseEvents"))}function n(a,b){var c,d,e,f,g,h,i=a.settings,j=!0,k=0,m=a.galleryWidth-2*a.border-(a.buildingRow.entriesBuff.length-1)*i.margins,n=m/a.buildingRow.aspectRatio,o=a.buildingRow.width/m>i.justifyThreshold;if(b&&"hide"===i.lastRow&&!o){for(c=0;c<a.buildingRow.entriesBuff.length;c++)d=a.buildingRow.entriesBuff[c],i.cssAnimation?d.removeClass("entry-visible"):d.stop().fadeTo(0,0);return-1}for(b&&!o&&"nojustify"===i.lastRow&&(j=!1),c=0;c<a.buildingRow.entriesBuff.length;c++)e=l(a.buildingRow.entriesBuff[c]),f=e.data("jg.imgw")/e.data("jg.imgh"),j?(g=c===a.buildingRow.entriesBuff.length-1?m:n*f,h=n):(g=i.rowHeight*f,h=i.rowHeight),m-=Math.round(g),e.data("jg.jimgw",Math.round(g)),e.data("jg.jimgh",Math.ceil(h)),(0===c||k>h)&&(k=h);return i.fixedHeight&&k>i.rowHeight&&(k=i.rowHeight),{minHeight:k,justify:j}}function o(a){a.lastAnalyzedIndex=-1,a.buildingRow.entriesBuff=[],a.buildingRow.aspectRatio=0,a.buildingRow.width=0,a.offY=a.border}function p(a,b){var c,d,e,f,g=a.settings,h=a.border;if(f=n(a,b),e=f.minHeight,b&&"hide"===g.lastRow&&-1===e)return a.buildingRow.entriesBuff=[],a.buildingRow.aspectRatio=0,void(a.buildingRow.width=0);g.maxRowHeight>0&&g.maxRowHeight<e?e=g.maxRowHeight:0===g.maxRowHeight&&1.5*g.rowHeight<e&&(e=1.5*g.rowHeight);for(var i=0;i<a.buildingRow.entriesBuff.length;i++)c=a.buildingRow.entriesBuff[i],d=l(c),m(c,h,a.offY,d.data("jg.jimgw"),d.data("jg.jimgh"),e,a),h+=d.data("jg.jimgw")+g.margins;a.$gallery.height(a.offY+e+a.border+(a.spinner.active?a.spinner.$el.innerHeight():0)),(!b||e<=a.settings.rowHeight&&f.justify)&&(a.offY+=e+a.settings.margins,a.buildingRow.entriesBuff=[],a.buildingRow.aspectRatio=0,a.buildingRow.width=0,a.$gallery.trigger("jg.rowflush"))}function q(a){a.checkWidthIntervalId=setInterval(function(){var b=parseInt(a.$gallery.width(),10);a.galleryWidth!==b&&(a.galleryWidth=b,o(a),u(a,!0))},a.settings.refreshTime)}function r(a){clearInterval(a.intervalId),a.intervalId=setInterval(function(){a.phase<a.$points.length?a.$points.eq(a.phase).fadeTo(a.timeslot,1):a.$points.eq(a.phase-a.$points.length).fadeTo(a.timeslot,0),a.phase=(a.phase+1)%(2*a.$points.length)},a.timeslot)}function s(a){clearInterval(a.intervalId),a.intervalId=null}function t(a){a.yield.flushed=0,null!==a.imgAnalyzerTimeout&&clearTimeout(a.imgAnalyzerTimeout)}function u(a,b){t(a),a.imgAnalyzerTimeout=setTimeout(function(){v(a,b)},.001),v(a,b)}function v(b,c){for(var d,e=b.settings,f=b.lastAnalyzedIndex+1;f<b.entries.length;f++){var g=a(b.entries[f]),h=l(g);if(h.data("jg.loaded")===!0||"skipped"===h.data("jg.loaded")){d=f>=b.entries.length-1;var i=b.galleryWidth-2*b.border-(b.buildingRow.entriesBuff.length-1)*e.margins,j=h.data("jg.imgw")/h.data("jg.imgh");if(i/(b.buildingRow.aspectRatio+j)<e.rowHeight&&(p(b,d),++b.yield.flushed>=b.yield.every))return void u(b,c);b.buildingRow.entriesBuff.push(g),b.buildingRow.aspectRatio+=j,b.buildingRow.width+=j*e.rowHeight,b.lastAnalyzedIndex=f}else if("error"!==h.data("jg.loaded"))return}b.buildingRow.entriesBuff.length>0&&p(b,!0),b.spinner.active&&(b.spinner.active=!1,b.$gallery.height(b.$gallery.height()-b.spinner.$el.innerHeight()),b.spinner.$el.detach(),s(b.spinner)),t(b),b.$gallery.trigger(c?"jg.resize":"jg.complete")}function w(a){function b(a){if("string"!=typeof d.sizeRangeSuffixes[a])throw"sizeRangeSuffixes."+a+" must be a string"}function c(a,b){if("string"==typeof a[b]){if(a[b]=parseFloat(a[b],10),isNaN(a[b]))throw"invalid number for "+b}else{if("number"!=typeof a[b])throw b+" must be a number";if(isNaN(a[b]))throw"invalid number for "+b}}var d=a.settings;if("object"!=typeof d.sizeRangeSuffixes)throw"sizeRangeSuffixes must be defined and must be an object";if(b("lt100"),b("lt240"),b("lt320"),b("lt500"),b("lt640"),b("lt1024"),c(d,"rowHeight"),c(d,"maxRowHeight"),d.maxRowHeight>0&&d.maxRowHeight<d.rowHeight&&(d.maxRowHeight=d.rowHeight),c(d,"margins"),c(d,"border"),"nojustify"!==d.lastRow&&"justify"!==d.lastRow&&"hide"!==d.lastRow)throw'lastRow must be "nojustify", "justify" or "hide"';if(c(d,"justifyThreshold"),d.justifyThreshold<0||d.justifyThreshold>1)throw"justifyThreshold must be in the interval [0,1]";if("boolean"!=typeof d.cssAnimation)throw"cssAnimation must be a boolean";if(c(d.captionSettings,"animationDuration"),c(d,"imagesAnimationDuration"),c(d.captionSettings,"visibleOpacity"),d.captionSettings.visibleOpacity<0||d.captionSettings.visibleOpacity>1)throw"captionSettings.visibleOpacity must be in the interval [0, 1]";if(c(d.captionSettings,"nonVisibleOpacity"),d.captionSettings.visibleOpacity<0||d.captionSettings.visibleOpacity>1)throw"captionSettings.nonVisibleOpacity must be in the interval [0, 1]";if("boolean"!=typeof d.fixedHeight)throw"fixedHeight must be a boolean";if("boolean"!=typeof d.captions)throw"captions must be a boolean";if(c(d,"refreshTime"),"boolean"!=typeof d.randomize)throw"randomize must be a boolean"}function x(b,c,d){if(c||d){var e=new Image,f=a(e);c&&f.one("load",function(){f.off("load error"),c(e)}),d&&f.one("error",function(){f.off("load error"),d(e)}),e.src=b}}var y={sizeRangeSuffixes:{lt100:"",lt240:"",lt320:"",lt500:"",lt640:"",lt1024:""},rowHeight:120,maxRowHeight:0,margins:1,border:-1,lastRow:"nojustify",justifyThreshold:.75,fixedHeight:!1,waitThumbnailsLoad:!0,captions:!0,cssAnimation:!1,imagesAnimationDuration:500,captionSettings:{animationDuration:500,visibleOpacity:.7,nonVisibleOpacity:0},rel:null,target:null,extension:/\.[^.\\/]+$/,refreshTime:100,randomize:!1};return this.each(function(c,d){var e=a(d);e.addClass("justified-gallery");var f=e.data("jg.context");if("undefined"==typeof f){if("undefined"!=typeof b&&null!==b&&"object"!=typeof b)throw"The argument must be an object";var g=a('<div class="spinner"><span></span><span></span><span></span></div>'),h=a.extend({},y,b),i=h.border>=0?h.border:h.margins;f={settings:h,imgAnalyzerTimeout:null,entries:null,buildingRow:{entriesBuff:[],width:0,aspectRatio:0},lastAnalyzedIndex:-1,"yield":{every:2,flushed:0},border:i,offY:i,spinner:{active:!1,phase:0,timeslot:150,$el:g,$points:g.find("span"),intervalId:null},checkWidthIntervalId:null,galleryWidth:e.width(),$gallery:e},e.data("jg.context",f)}else if("norewind"===b)for(var j=0;j<f.buildingRow.entriesBuff.length;j++)k(f.buildingRow.entriesBuff[j],f);else f.settings=a.extend({},f.settings,b),f.border=f.settings.border>=0?f.settings.border:f.settings.margins,o(f);if(w(f),f.entries=e.find("> a, > div:not(.spinner)").toArray(),0!==f.entries.length){f.settings.randomize&&(f.entries.sort(function(){return 2*Math.random()-1}),a.each(f.entries,function(){a(this).appendTo(e)}));var m=!1,n=!1;a.each(f.entries,function(b,c){var d=a(c),g=l(d);if(d.addClass("jg-entry"),g.data("jg.loaded")!==!0&&"skipped"!==g.data("jg.loaded")){null!==f.settings.rel&&d.attr("rel",f.settings.rel),null!==f.settings.target&&d.attr("target",f.settings.target);var h="undefined"!=typeof g.data("safe-src")?g.data("safe-src"):g.attr("src");g.data("jg.originalSrc",h),g.attr("src",h);var i=parseInt(g.attr("width"),10),j=parseInt(g.attr("height"),10);if(f.settings.waitThumbnailsLoad!==!0&&!isNaN(i)&&!isNaN(j))return g.data("jg.imgw",i),g.data("jg.imgh",j),g.data("jg.loaded","skipped"),n=!0,u(f,!1),!0;g.data("jg.loaded",!1),m=!0,f.spinner.active===!1&&(f.spinner.active=!0,e.append(f.spinner.$el),e.height(f.offY+f.spinner.$el.innerHeight()),r(f.spinner)),x(h,function(a){g.data("jg.imgw",a.width),g.data("jg.imgh",a.height),g.data("jg.loaded",!0),u(f,!1)},function(){g.data("jg.loaded","error"),u(f,!1)})}}),m||n||u(f,!1),q(f)}})}}(jQuery);!function(e,i,t,s){t.swipebox=function(o,a){var n,r,l={useCSS:!0,useSVG:!0,initialIndexOnArray:0,removeBarsOnMobile:!0,hideCloseButtonOnMobile:!1,hideBarsDelay:3e3,videoMaxWidth:1140,vimeoColor:"cccccc",beforeOpen:null,afterOpen:null,afterClose:null,loopAtEnd:!1,autoplayVideos:!1,queryStringData:{},toggleClassOnLoad:""},d=this,p=[],b=o.selector,c=t(b),u=navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i),h=null!==u||i.createTouch!==s||"ontouchstart"in e||"onmsgesturechange"in e||navigator.msMaxTouchPoints,w=!!i.createElementNS&&!!i.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,m=e.innerWidth?e.innerWidth:t(e).width(),g=e.innerHeight?e.innerHeight:t(e).height(),f=0,v='<div id="swipebox-overlay">					<div id="swipebox-container">						<div id="swipebox-slider"></div>						<div id="swipebox-top-bar">							<div id="swipebox-title"></div>						</div>						<div id="swipebox-bottom-bar">							<div id="swipebox-arrows">								<a id="swipebox-prev"></a>								<a id="swipebox-next"></a>							</div>						</div>						<a id="swipebox-close"></a>					</div>			</div>';d.settings={},t.swipebox.close=function(){n.closeSlide()},t.swipebox.extend=function(){return n},d.init=function(){d.settings=t.extend({},l,a),t.isArray(o)?(p=o,n.target=t(e),n.init(d.settings.initialIndexOnArray)):t(i).on("click",b,function(e){if("slide current"===e.target.parentNode.className)return!1;t.isArray(o)||(n.destroy(),r=t(b),n.actions()),p=[];var i,s,a;a||(s="data-rel",a=t(this).attr(s)),a||(s="rel",a=t(this).attr(s)),r=a&&""!==a&&"nofollow"!==a?c.filter("["+s+'="'+a+'"]'):t(b),r.each(function(){var e=null,i=null;t(this).attr("title")&&(e=t(this).attr("title")),t(this).attr("href")&&(i=t(this).attr("href")),p.push({href:i,title:e})}),i=r.index(t(this)),e.preventDefault(),e.stopPropagation(),n.target=t(e.target),n.init(i)})},n={init:function(e){d.settings.beforeOpen&&d.settings.beforeOpen(),this.target.trigger("swipebox-start"),t.swipebox.isOpen=!0,this.build(),this.openSlide(e),this.openMedia(e),this.preloadMedia(e+1),this.preloadMedia(e-1),d.settings.afterOpen&&d.settings.afterOpen()},build:function(){var e,i=this;t("body").append(v),w&&d.settings.useSVG===!0&&(e=t("#swipebox-close").css("background-image"),e=e.replace("png","svg"),t("#swipebox-prev, #swipebox-next, #swipebox-close").css({"background-image":e})),u&&d.settings.removeBarsOnMobile&&t("#swipebox-bottom-bar, #swipebox-top-bar").remove(),t.each(p,function(){t("#swipebox-slider").append('<div class="slide"></div>')}),i.setDim(),i.actions(),h&&i.gesture(),i.keyboard(),i.animBars(),i.resize()},setDim:function(){var i,s,o={};"onorientationchange"in e?e.addEventListener("orientationchange",function(){0===e.orientation?(i=m,s=g):(90===e.orientation||-90===e.orientation)&&(i=g,s=m)},!1):(i=e.innerWidth?e.innerWidth:t(e).width(),s=e.innerHeight?e.innerHeight:t(e).height()),o={width:i,height:s},t("#swipebox-overlay").css(o)},resize:function(){var i=this;t(e).resize(function(){i.setDim()}).resize()},supportTransition:function(){var e,t="transition WebkitTransition MozTransition OTransition msTransition KhtmlTransition".split(" ");for(e=0;e<t.length;e++)if(i.createElement("div").style[t[e]]!==s)return t[e];return!1},doCssTrans:function(){return d.settings.useCSS&&this.supportTransition()?!0:void 0},gesture:function(){var e,i,s,o,a,n,r=this,l=!1,d=!1,b=10,c=50,u={},h={},w=t("#swipebox-top-bar, #swipebox-bottom-bar"),g=t("#swipebox-slider");w.addClass("visible-bars"),r.setTimeout(),t("body").bind("touchstart",function(r){return t(this).addClass("touching"),e=t("#swipebox-slider .slide").index(t("#swipebox-slider .slide.current")),h=r.originalEvent.targetTouches[0],u.pageX=r.originalEvent.targetTouches[0].pageX,u.pageY=r.originalEvent.targetTouches[0].pageY,t("#swipebox-slider").css({"-webkit-transform":"translate3d("+f+"%, 0, 0)",transform:"translate3d("+f+"%, 0, 0)"}),t(".touching").bind("touchmove",function(r){if(r.preventDefault(),r.stopPropagation(),h=r.originalEvent.targetTouches[0],!d&&(a=s,s=h.pageY-u.pageY,Math.abs(s)>=c||l)){var w=.75-Math.abs(s)/g.height();g.css({top:s+"px"}),g.css({opacity:w}),l=!0}o=i,i=h.pageX-u.pageX,n=100*i/m,!d&&!l&&Math.abs(i)>=b&&(t("#swipebox-slider").css({"-webkit-transition":"",transition:""}),d=!0),d&&(i>0?0===e?t("#swipebox-overlay").addClass("leftSpringTouch"):(t("#swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch"),t("#swipebox-slider").css({"-webkit-transform":"translate3d("+(f+n)+"%, 0, 0)",transform:"translate3d("+(f+n)+"%, 0, 0)"})):0>i&&(p.length===e+1?t("#swipebox-overlay").addClass("rightSpringTouch"):(t("#swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch"),t("#swipebox-slider").css({"-webkit-transform":"translate3d("+(f+n)+"%, 0, 0)",transform:"translate3d("+(f+n)+"%, 0, 0)"}))))}),!1}).bind("touchend",function(e){if(e.preventDefault(),e.stopPropagation(),t("#swipebox-slider").css({"-webkit-transition":"-webkit-transform 0.4s ease",transition:"transform 0.4s ease"}),s=h.pageY-u.pageY,i=h.pageX-u.pageX,n=100*i/m,l)if(l=!1,Math.abs(s)>=2*c&&Math.abs(s)>Math.abs(a)){var p=s>0?g.height():-g.height();g.animate({top:p+"px",opacity:0},300,function(){r.closeSlide()})}else g.animate({top:0,opacity:1},300);else d?(d=!1,i>=b&&i>=o?r.getPrev():-b>=i&&o>=i&&r.getNext()):w.hasClass("visible-bars")?(r.clearTimeout(),r.hideBars()):(r.showBars(),r.setTimeout());t("#swipebox-slider").css({"-webkit-transform":"translate3d("+f+"%, 0, 0)",transform:"translate3d("+f+"%, 0, 0)"}),t("#swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch"),t(".touching").off("touchmove").removeClass("touching")})},setTimeout:function(){if(d.settings.hideBarsDelay>0){var i=this;i.clearTimeout(),i.timeout=e.setTimeout(function(){i.hideBars()},d.settings.hideBarsDelay)}},clearTimeout:function(){e.clearTimeout(this.timeout),this.timeout=null},showBars:function(){var e=t("#swipebox-top-bar, #swipebox-bottom-bar");this.doCssTrans()?e.addClass("visible-bars"):(t("#swipebox-top-bar").animate({top:0},500),t("#swipebox-bottom-bar").animate({bottom:0},500),setTimeout(function(){e.addClass("visible-bars")},1e3))},hideBars:function(){var e=t("#swipebox-top-bar, #swipebox-bottom-bar");this.doCssTrans()?e.removeClass("visible-bars"):(t("#swipebox-top-bar").animate({top:"-50px"},500),t("#swipebox-bottom-bar").animate({bottom:"-50px"},500),setTimeout(function(){e.removeClass("visible-bars")},1e3))},animBars:function(){var e=this,i=t("#swipebox-top-bar, #swipebox-bottom-bar");i.addClass("visible-bars"),e.setTimeout(),t("#swipebox-slider").click(function(){i.hasClass("visible-bars")||(e.showBars(),e.setTimeout())}),t("#swipebox-bottom-bar").hover(function(){e.showBars(),i.addClass("visible-bars"),e.clearTimeout()},function(){d.settings.hideBarsDelay>0&&(i.removeClass("visible-bars"),e.setTimeout())})},keyboard:function(){var i=this;t(e).bind("keyup",function(e){e.preventDefault(),e.stopPropagation(),37===e.keyCode?i.getPrev():39===e.keyCode?i.getNext():27===e.keyCode&&i.closeSlide()})},actions:function(){var e=this,i="touchend click";p.length<2?(t("#swipebox-bottom-bar").hide(),s===p[1]&&t("#swipebox-top-bar").hide()):(t("#swipebox-prev").bind(i,function(i){i.preventDefault(),i.stopPropagation(),e.getPrev(),e.setTimeout()}),t("#swipebox-next").bind(i,function(i){i.preventDefault(),i.stopPropagation(),e.getNext(),e.setTimeout()})),t("#swipebox-close").bind(i,function(){e.closeSlide()})},setSlide:function(e,i){i=i||!1;var s=t("#swipebox-slider");f=100*-e,this.doCssTrans()?s.css({"-webkit-transform":"translate3d("+100*-e+"%, 0, 0)",transform:"translate3d("+100*-e+"%, 0, 0)"}):s.animate({left:100*-e+"%"}),t("#swipebox-slider .slide").removeClass("current"),t("#swipebox-slider .slide").eq(e).addClass("current"),this.setTitle(e),i&&s.fadeIn(),t("#swipebox-prev, #swipebox-next").removeClass("disabled"),0===e?t("#swipebox-prev").addClass("disabled"):e===p.length-1&&d.settings.loopAtEnd!==!0&&t("#swipebox-next").addClass("disabled")},openSlide:function(i){t("html").addClass("swipebox-html"),h?(t("html").addClass("swipebox-touch"),d.settings.hideCloseButtonOnMobile&&t("html").addClass("swipebox-no-close-button")):t("html").addClass("swipebox-no-touch"),t(e).trigger("resize"),this.setSlide(i,!0)},preloadMedia:function(e){var i=this,t=null;p[e]!==s&&(t=p[e].href),i.isVideo(t)?i.openMedia(e):setTimeout(function(){i.openMedia(e)},1e3)},openMedia:function(e){var i,o,a=this;return p[e]!==s&&(i=p[e].href),0>e||e>=p.length?!1:(o=t("#swipebox-slider .slide").eq(e),void(a.isVideo(i)?o.html(a.getVideo(i)):(o.addClass("slide-loading"),a.loadMedia(i,function(){o.removeClass("slide-loading"),o.html(this)}))))},setTitle:function(e){var i=null;t("#swipebox-title").empty(),p[e]!==s&&(i=p[e].title),i?(t("#swipebox-top-bar").show(),t("#swipebox-title").append(i)):t("#swipebox-top-bar").hide()},isVideo:function(e){if(e){if(e.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||e.match(/vimeo\.com\/([0-9]*)/)||e.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/))return!0;if(e.toLowerCase().indexOf("swipeboxvideo=1")>=0)return!0}},parseUri:function(e,s){var o=i.createElement("a"),a={};return o.href=decodeURIComponent(e),a=JSON.parse('{"'+o.search.toLowerCase().replace("?","").replace(/&/g,'","').replace(/=/g,'":"')+'"}'),t.isPlainObject(s)&&(a=t.extend(a,s,d.settings.queryStringData)),t.map(a,function(e,i){return e&&e>""?encodeURIComponent(i)+"="+encodeURIComponent(e):void 0}).join("&")},getVideo:function(e){var i="",t=e.match(/((?:www\.)?youtube\.com|(?:www\.)?youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/),s=e.match(/(?:www\.)?youtu\.be\/([a-zA-Z0-9\-_]+)/),o=e.match(/(?:www\.)?vimeo\.com\/([0-9]*)/),a="";return t||s?(s&&(t=s),a=n.parseUri(e,{autoplay:d.settings.autoplayVideos?"1":"0",v:""}),i='<iframe width="560" height="315" src="//'+t[1]+"/embed/"+t[2]+"?"+a+'" frameborder="0" allowfullscreen></iframe>'):o?(a=n.parseUri(e,{autoplay:d.settings.autoplayVideos?"1":"0",byline:"0",portrait:"0",color:d.settings.vimeoColor}),i='<iframe width="560" height="315"  src="//player.vimeo.com/video/'+o[1]+"?"+a+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'):i='<iframe width="560" height="315" src="'+e+'" frameborder="0" allowfullscreen></iframe>','<div class="swipebox-video-container" style="max-width:'+d.settings.videoMaxWidth+'px"><div class="swipebox-video">'+i+"</div></div>"},loadMedia:function(e,i){if(0===e.trim().indexOf("#"))i.call(t("<div>",{"class":"swipebox-inline-container"}).append(t(e).clone().toggleClass(d.settings.toggleClassOnLoad)));else if(!this.isVideo(e)){var s=t("<img>").on("load",function(){i.call(s)});s.attr("src",e)}},getNext:function(){var e,i=this,s=t("#swipebox-slider .slide").index(t("#swipebox-slider .slide.current"));s+1<p.length?(e=t("#swipebox-slider .slide").eq(s).contents().find("iframe").attr("src"),t("#swipebox-slider .slide").eq(s).contents().find("iframe").attr("src",e),s++,i.setSlide(s),i.preloadMedia(s+1)):d.settings.loopAtEnd===!0?(e=t("#swipebox-slider .slide").eq(s).contents().find("iframe").attr("src"),t("#swipebox-slider .slide").eq(s).contents().find("iframe").attr("src",e),s=0,i.preloadMedia(s),i.setSlide(s),i.preloadMedia(s+1)):(t("#swipebox-overlay").addClass("rightSpring"),setTimeout(function(){t("#swipebox-overlay").removeClass("rightSpring")},500))},getPrev:function(){var e,i=t("#swipebox-slider .slide").index(t("#swipebox-slider .slide.current"));i>0?(e=t("#swipebox-slider .slide").eq(i).contents().find("iframe").attr("src"),t("#swipebox-slider .slide").eq(i).contents().find("iframe").attr("src",e),i--,this.setSlide(i),this.preloadMedia(i-1)):(t("#swipebox-overlay").addClass("leftSpring"),setTimeout(function(){t("#swipebox-overlay").removeClass("leftSpring")},500))},closeSlide:function(){t("html").removeClass("swipebox-html"),t("html").removeClass("swipebox-touch"),t(e).trigger("resize"),this.destroy()},destroy:function(){t(e).unbind("keyup"),t("body").unbind("touchstart"),t("body").unbind("touchmove"),t("body").unbind("touchend"),t("#swipebox-slider").unbind(),t("#swipebox-overlay").remove(),t.isArray(o)||o.removeData("_swipebox"),this.target&&this.target.trigger("swipebox-destroy"),t.swipebox.isOpen=!1,d.settings.afterClose&&d.settings.afterClose()}},d.init()},t.fn.swipebox=function(e){if(!t.data(this,"_swipebox")){var i=new t.swipebox(this,e);this.data("_swipebox",i)}return this.data("_swipebox")}}(window,document,jQuery);
;!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function i(t){return"number"==typeof t}function e(t){return"undefined"==typeof t}function h(t,e){var h=[];return i(e)&&h.push(e),h.slice.apply(t,h)}function a(t,i){var e=h(arguments,2);return function(){return t.apply(i,e.concat(h(arguments)))}}function s(t){var i=t.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i);return i&&(i[1]!==g.protocol||i[2]!==g.hostname||i[3]!==g.port)}function o(t){var i="timestamp="+(new Date).getTime();return t+(-1===t.indexOf("?")?"?":"&")+i}function n(t){return t?"rotate("+t+"deg)":"none"}function r(t,i){var e,h,a=A(t.degree)%180,s=(a>90?180-a:a)*Math.PI/180,o=F(s),n=Z(s),r=t.width,d=t.height,p=t.aspectRatio;return i?(e=r/(n+o/p),h=e/p):(e=r*n+d*o,h=r*o+d*n),{width:e,height:h}}function d(i,e){var h=t("<canvas>")[0],a=h.getContext("2d"),s=e.naturalWidth,o=e.naturalHeight,n=e.rotate,d=r({width:s,height:o,degree:n});return n?(h.width=d.width,h.height=d.height,a.save(),a.translate(d.width/2,d.height/2),a.rotate(n*Math.PI/180),a.drawImage(i,-s/2,-o/2,s,o),a.restore()):(h.width=s,h.height=o,a.drawImage(i,0,0,s,o)),h}function p(i,e){this.$element=t(i),this.options=t.extend({},p.DEFAULTS,t.isPlainObject(e)&&e),this.ready=!1,this.built=!1,this.rotated=!1,this.cropped=!1,this.disabled=!1,this.load()}var l=t(window),c=t(document),g=window.location,f=".cropper",m=/^(e|n|w|s|ne|nw|sw|se|all|crop|move|zoom)$/,u="cropper-modal",v="cropper-hide",w="cropper-hidden",x="cropper-invisible",b="cropper-move",C="cropper-crop",y="cropper-disabled",$="cropper-bg",B="mousedown touchstart",D="mousemove touchmove",T="mouseup mouseleave touchend touchleave touchcancel",W="wheel mousewheel DOMMouseScroll",k="dblclick",H="resize"+f,L="build"+f,z="built"+f,Y="dragstart"+f,X="dragmove"+f,R="dragend"+f,E="zoomin"+f,M="zoomout"+f,P=t.isFunction(t("<canvas>")[0].getContext),O=Math.sqrt,I=Math.min,j=Math.max,A=Math.abs,F=Math.sin,Z=Math.cos,_=parseFloat,S={};S.load=function(i){var e,h,a,n=this.options,r=this.$element;i||(r.is("img")?i=r.prop("src"):r.is("canvas")&&P&&(i=r[0].toDataURL())),i&&(h=t.Event(L),r.one(L,n.build).trigger(h),h.isDefaultPrevented()||(n.checkImageOrigin&&s(i)&&(e=" crossOrigin",r.prop("crossOrigin")||(i=o(i))),this.$clone=a=t("<img>"),a.one("load",t.proxy(function(){var t=a.prop("naturalWidth")||a.width(),e=a.prop("naturalHeight")||a.height();this.image={naturalWidth:t,naturalHeight:e,aspectRatio:t/e,rotate:0},this.url=i,this.ready=!0,this.build()},this)).attr({src:i,crossOrigin:e}),a.addClass(v).insertAfter(r)))},S.build=function(){var i,e,h=this.$element,a=this.$clone,s=this.options;this.ready&&(this.built&&this.unbuild(),this.$cropper=i=t(p.TEMPLATE),h.addClass(w),a.removeClass(v),this.$container=h.parent().append(i),this.$canvas=i.find(".cropper-canvas").append(a),this.$dragBox=i.find(".cropper-drag-box"),this.$cropBox=e=i.find(".cropper-crop-box"),this.$viewBox=i.find(".cropper-view-box"),this.addListeners(),this.initPreview(),s.aspectRatio=_(s.aspectRatio)||0/0,s.autoCrop?(this.cropped=!0,s.modal&&this.$dragBox.addClass(u)):e.addClass(w),s.background&&i.addClass($),s.highlight||e.find(".cropper-face").addClass(x),s.guides||e.find(".cropper-dashed").addClass(w),s.movable||e.find(".cropper-face").data("drag","move"),s.resizable||e.find(".cropper-line, .cropper-point").addClass(w),this.setDragMode(s.dragCrop?"crop":"move"),this.built=!0,this.render(),h.one(z,s.built).trigger(z))},S.unbuild=function(){this.built&&(this.built=!1,this.removeListeners(),this.$preview.empty(),this.$preview=null,this.$viewBox=null,this.$cropBox=null,this.$dragBox=null,this.$canvas=null,this.$container=null,this.$cropper.remove(),this.$cropper=null)},t.extend(S,{render:function(){this.initContainer(),this.initCanvas(),this.initCropBox()},initContainer:function(){var t=this.$element,i=this.$container,e=this.$cropper,h=this.options;e.addClass(w),t.removeClass(w),e.css(this.container={width:j(i.width(),_(h.minContainerWidth)||200),height:j(i.height(),_(h.minContainerHeight)||100)}),t.addClass(w),e.removeClass(w)},initCanvas:function(){var i=this.options,e=this.container,h=e.width,a=e.height,s=this.image,o=s.aspectRatio,n={aspectRatio:o,width:h,height:a,left:0,top:0,minLeft:-h,minTop:-a,maxLeft:h,maxTop:a,minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0};a*o>h?i.strict?n.width=a*o:n.height=h/o:i.strict?n.height=h/o:n.width=a*o,n.oldLeft=n.left=(h-n.width)/2,n.oldTop=n.top=(a-n.height)/2,this.canvas=n,this.limitCanvas(),this.initialImage=t.extend({},s),this.initialCanvas=t.extend({},this.canvas),this.renderCanvas()},limitCanvas:function(){var t=this.options,i=this.container,e=i.width,h=i.height,a=this.canvas,s=a.aspectRatio,o=e,n=h;h*s>e?t.strict?o=h*s:n=e/s:t.strict?n=e/s:o=h*s,t.strict?(a.minWidth=o,a.minHeight=n,a.maxLeft=0,a.maxTop=0,a.minLeft=e-o,a.minTop=h-n):(a.minLeft=-o,a.minTop=-n)},renderCanvas:function(i){var e,h,a,s=this.options,o=this.container,d=this.canvas,p=this.image;this.rotated&&(this.rotated=!1,a=r({width:p.width,height:p.height,degree:p.rotate}),e=a.width/a.height,e!==d.aspectRatio&&(d.left-=(a.width-d.width)/2,d.top-=(a.height-d.height)/2,d.width=a.width,d.height=a.height,d.aspectRatio=e,this.limitCanvas())),(d.width>d.maxWidth||d.width<d.minWidth)&&(d.left=d.oldLeft),(d.height>d.maxHeight||d.height<d.minHeight)&&(d.top=d.oldTop),d.width=I(j(d.width,d.minWidth),d.maxWidth),d.height=I(j(d.height,d.minHeight),d.maxHeight),s.strict?(d.minLeft=o.width-d.width,d.minTop=o.height-d.height):(d.minLeft=-d.width,d.minTop=-d.height),d.oldLeft=d.left=I(j(d.left,d.minLeft),d.maxLeft),d.oldTop=d.top=I(j(d.top,d.minTop),d.maxTop),this.$canvas.css({width:d.width,height:d.height,left:d.left,top:d.top}),p.rotate?(h=r({width:d.width,height:d.height,degree:p.rotate,aspectRatio:p.aspectRatio},!0),t.extend(p,{width:h.width,height:h.height,left:(d.width-h.width)/2,top:(d.height-h.height)/2})):t.extend(p,{width:d.width,height:d.height,left:0,top:0}),this.$clone.css({width:p.width,height:p.height,marginLeft:p.left,marginTop:p.top,transform:n(p.rotate)}),i&&(this.preview(),s.crop&&s.crop.call(this.$element,this.getData()))},initCropBox:function(){var i=this.options,e=this.container,h=this.canvas,a=i.strict,s=i.aspectRatio,o=_(i.minCropBoxWidth)||0,n=_(i.minCropBoxHeight)||0,r=_(i.autoCropArea)||.8,d=e.width,p=e.height,l={width:a?d:h.width,height:a?p:h.height,minWidth:o,minHeight:n,maxWidth:d,maxHeight:p};s&&(p*s>d?(l.height=l.width/s,l.maxHeight=d/s):(l.width=l.height*s,l.maxWidth=p*s),a||(l.height*h.aspectRatio>l.width?(l.height=h.height,l.width=l.height*s):(l.width=h.width,l.height=l.width/s)),o?l.minHeight=l.minWidth/s:n&&(l.minWidth=l.minHeight*s)),l.minWidth=I(l.maxWidth,l.minWidth),l.minHeight=I(l.maxHeight,l.minHeight),l.width=j(l.minWidth,l.width*r),l.height=j(l.minHeight,l.height*r),l.oldLeft=l.left=(d-l.width)/2,l.oldTop=l.top=(p-l.height)/2,this.initialCropBox=t.extend({},l),this.cropBox=l,this.cropped&&this.renderCropBox()},renderCropBox:function(){var t=this.options,i=this.container,e=i.width,h=i.height,a=this.$cropBox,s=this.cropBox;(s.width>s.maxWidth||s.width<s.minWidth)&&(s.left=s.oldLeft),(s.height>s.maxHeight||s.height<s.minHeight)&&(s.top=s.oldTop),s.width=I(j(s.width,s.minWidth),s.maxWidth),s.height=I(j(s.height,s.minHeight),s.maxHeight),s.oldLeft=s.left=I(j(s.left,0),e-s.width),s.oldTop=s.top=I(j(s.top,0),h-s.height),t.movable&&a.find(".cropper-face").data("drag",s.width===e&&s.height===h?"move":"all"),a.css({width:s.width,height:s.height,left:s.left,top:s.top}),this.disabled||(this.preview(),t.crop&&t.crop.call(this.$element,this.getData()))}}),S.initPreview=function(){var i=this.url;this.$preview=t(this.options.preview),this.$viewBox.html('<img src="'+i+'">'),this.$preview.each(function(){var e=t(this);e.data({width:e.width(),height:e.height()}).html('<img src="'+i+'" style="display:block;width:100%;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation: 0deg!important">')})},S.preview=function(){var i=this.image,e=this.canvas,h=this.cropBox,a=i.width,s=i.height,o=h.left-e.left-i.left,r=h.top-e.top-i.top,d=i.rotate;this.cropped&&!this.disabled&&(this.$viewBox.find("img").css({width:a,height:s,marginLeft:-o,marginTop:-r,transform:n(d)}),this.$preview.each(function(){var i=t(this),e=i.data(),p=e.width/h.width,l=e.width,c=h.height*p;c>e.height&&(p=e.height/h.height,l=h.width*p,c=e.height),i.width(l).height(c).find("img").css({width:a*p,height:s*p,marginLeft:-o*p,marginTop:-r*p,transform:n(d)})}))},S.addListeners=function(){var i=this.options;this.$element.on(Y,i.dragstart).on(X,i.dragmove).on(R,i.dragend).on(E,i.zoomin).on(M,i.zoomout),this.$cropper.on(B,t.proxy(this.dragstart,this)).on(k,t.proxy(this.dblclick,this)),i.zoomable&&i.mouseWheelZoom&&this.$cropper.on(W,t.proxy(this.wheel,this)),c.on(D,this._dragmove=a(this.dragmove,this)).on(T,this._dragend=a(this.dragend,this)),i.responsive&&l.on(H,this._resize=a(this.resize,this))},S.removeListeners=function(){var t=this.options;this.$element.off(Y,t.dragstart).off(X,t.dragmove).off(R,t.dragend).off(E,t.zoomin).off(M,t.zoomout),this.$cropper.off(B,this.dragstart).off(k,this.dblclick),t.zoomable&&t.mouseWheelZoom&&this.$cropper.off(W,this.wheel),c.off(D,this._dragmove).off(T,this._dragend),t.responsive&&l.off(H,this._resize)},t.extend(S,{resize:function(){var i,e,h,a=this.$container,s=this.container;this.disabled||(h=a.width()/s.width,(1!==h||a.height()!==s.height)&&(i=this.getCanvasData(),e=this.getCropBoxData(),this.render(),this.setCanvasData(t.each(i,function(t,e){i[t]=e*h})),this.setCropBoxData(t.each(e,function(t,i){e[t]=i*h}))))},dblclick:function(){this.disabled||this.setDragMode(this.$dragBox.hasClass(C)?"move":"crop")},wheel:function(t){var i=t.originalEvent,e=1;this.disabled||(t.preventDefault(),i.deltaY?e=i.deltaY>0?1:-1:i.wheelDelta?e=-i.wheelDelta/120:i.detail&&(e=i.detail>0?1:-1),this.zoom(.1*e))},dragstart:function(i){var e,h,a,s=this.options,o=i.originalEvent,n=o&&o.touches,r=i;if(!this.disabled){if(n){if(a=n.length,a>1){if(!s.zoomable||!s.touchDragZoom||2!==a)return;r=n[1],this.startX2=r.pageX,this.startY2=r.pageY,e="zoom"}r=n[0]}if(e=e||t(r.target).data("drag"),m.test(e)){if(i.preventDefault(),h=t.Event(Y,{originalEvent:o,dragType:e}),this.$element.trigger(h),h.isDefaultPrevented())return;this.dragType=e,this.cropping=!1,this.startX=r.pageX,this.startY=r.pageY,"crop"===e&&(this.cropping=!0,this.$dragBox.addClass(u))}}},dragmove:function(i){var e,h,a=this.options,s=i.originalEvent,o=s&&s.touches,n=i,r=this.dragType;if(!this.disabled){if(o){if(h=o.length,h>1){if(!a.zoomable||!a.touchDragZoom||2!==h)return;n=o[1],this.endX2=n.pageX,this.endY2=n.pageY}n=o[0]}if(r){if(i.preventDefault(),e=t.Event(X,{originalEvent:s,dragType:r}),this.$element.trigger(e),e.isDefaultPrevented())return;this.endX=n.pageX,this.endY=n.pageY,this.change()}}},dragend:function(i){var e,h=this.dragType;if(!this.disabled&&h){if(i.preventDefault(),e=t.Event(R,{originalEvent:i.originalEvent,dragType:h}),this.$element.trigger(e),e.isDefaultPrevented())return;this.cropping&&(this.cropping=!1,this.$dragBox.toggleClass(u,this.cropped&&this.options.modal)),this.dragType=""}}}),t.extend(S,{reset:function(){this.disabled||(this.image=t.extend({},this.initialImage),this.canvas=t.extend({},this.initialCanvas),this.renderCanvas(),this.cropped&&(this.cropBox=t.extend({},this.initialCropBox),this.renderCropBox()))},clear:function(){this.cropped&&!this.disabled&&(t.extend(this.cropBox,{left:0,top:0,width:0,height:0}),this.renderCropBox(),this.cropped=!1,this.$dragBox.removeClass(u),this.$cropBox.addClass(w))},destroy:function(){var t=this.$element;this.ready||this.$clone.off("load").remove(),this.unbuild(),t.removeClass(w).removeData("cropper")},replace:function(t){this.ready&&!this.disabled&&t&&this.load(t)},enable:function(){this.built&&(this.disabled=!1,this.$cropper.removeClass(y))},disable:function(){this.built&&(this.disabled=!0,this.$cropper.addClass(y))},move:function(t,e){var h=this.canvas;this.built&&!this.disabled&&i(t)&&i(e)&&(h.left+=t,h.top+=e,this.renderCanvas(!0))},zoom:function(i){var e,h,a,s=this.canvas;if(i=_(i),i&&this.built&&!this.disabled&&this.options.zoomable){if(e=t.Event(i>0?E:M),this.$element.trigger(e),e.isDefaultPrevented())return;i=-1>=i?1/(1-i):1>=i?1+i:i,h=s.width*i,a=s.height*i,s.left-=(h-s.width)/2,s.top-=(a-s.height)/2,s.width=h,s.height=a,this.renderCanvas(!0),this.setDragMode("move")}},rotate:function(t){var i=this.image;t=_(t),t&&this.built&&!this.disabled&&this.options.rotatable&&(i.rotate=(i.rotate+t)%360,this.rotated=!0,this.renderCanvas(!0))},getData:function(){var i,e,h=this.cropBox,a=this.canvas,s=this.image,o=s.rotate;return this.built&&this.cropped?(e={x:h.left-a.left,y:h.top-a.top,width:h.width,height:h.height},i=s.width/s.naturalWidth,t.each(e,function(t,h){h/=i,e[t]=h})):e={x:0,y:0,width:0,height:0},e.rotate=o,e},getContainerData:function(){return this.built?this.container:{}},getImageData:function(){return this.ready?this.image:{}},getCanvasData:function(){var t,i=this.canvas;return this.built&&(t={left:i.left,top:i.top,width:i.width,height:i.height}),t||{}},setCanvasData:function(e){var h=this.canvas,a=h.aspectRatio;this.built&&!this.disabled&&t.isPlainObject(e)&&(i(e.left)&&(h.left=e.left),i(e.top)&&(h.top=e.top),i(e.width)?(h.width=e.width,h.height=e.width/a):i(e.height)&&(h.height=e.height,h.width=e.height*a),this.renderCanvas(!0))},getCropBoxData:function(){var t,i=this.cropBox;return this.built&&this.cropped&&(t={left:i.left,top:i.top,width:i.width,height:i.height}),t||{}},setCropBoxData:function(e){var h=this.cropBox,a=this.options.aspectRatio;this.built&&this.cropped&&!this.disabled&&t.isPlainObject(e)&&(i(e.left)&&(h.left=e.left),i(e.top)&&(h.top=e.top),a?i(e.width)?(h.width=e.width,h.height=h.width/a):i(e.height)&&(h.height=e.height,h.width=h.height*a):(i(e.width)&&(h.width=e.width),i(e.height)&&(h.height=e.height)),this.renderCropBox())},getCroppedCanvas:function(i){var e,h,a,s,o,n,r,p,l,c,g;if(this.built&&this.cropped&&P)return t.isPlainObject(i)||(i={}),g=this.getData(),e=g.width,h=g.height,p=e/h,t.isPlainObject(i)&&(o=i.width,n=i.height,o?(n=o/p,r=o/e):n&&(o=n*p,r=n/h)),a=o||e,s=n||h,l=t("<canvas>")[0],l.width=a,l.height=s,c=l.getContext("2d"),i.fillColor&&(c.fillStyle=i.fillColor,c.fillRect(0,0,a,s)),c.drawImage.apply(c,function(){var t,i,a,s,o,n,p=d(this.$clone[0],this.image),l=p.width,c=p.height,f=[p],m=g.x,u=g.y;return-e>=m||m>l?m=t=a=o=0:0>=m?(a=-m,m=0,t=o=I(l,e+m)):l>=m&&(a=0,t=o=I(e,l-m)),0>=t||-h>=u||u>c?u=i=s=n=0:0>=u?(s=-u,u=0,i=n=I(c,h+u)):c>=u&&(s=0,i=n=I(h,c-u)),f.push(m,u,t,i),r&&(a*=r,s*=r,o*=r,n*=r),o>0&&n>0&&f.push(a,s,o,n),f}.call(this)),l},setAspectRatio:function(t){var i=this.options;this.disabled||e(t)||(i.aspectRatio=_(t)||0/0,this.built&&this.initCropBox())},setDragMode:function(t){var i=this.$dragBox,e=!1,h=!1;if(this.ready&&!this.disabled){switch(t){case"crop":this.options.dragCrop?(e=!0,i.data("drag",t)):h=!0;break;case"move":h=!0,i.data("drag",t);break;default:i.removeData("drag")}i.toggleClass(C,e).toggleClass(b,h)}}}),S.change=function(){var t,i=this.dragType,e=this.canvas,h=this.container,a=h.width,s=h.height,o=this.cropBox,n=o.width,r=o.height,d=o.left,p=o.top,l=d+n,c=p+r,g=!0,f=this.options.aspectRatio,m={x:this.endX-this.startX,y:this.endY-this.startY};switch(f&&(m.X=m.y*f,m.Y=m.x/f),i){case"all":d+=m.x,p+=m.y;break;case"e":if(m.x>=0&&(l>=a||f&&(0>=p||c>=s))){g=!1;break}n+=m.x,f&&(r=n/f,p-=m.Y/2),0>n&&(i="w",n=0);break;case"n":if(m.y<=0&&(0>=p||f&&(0>=d||l>=a))){g=!1;break}r-=m.y,p+=m.y,f&&(n=r*f,d+=m.X/2),0>r&&(i="s",r=0);break;case"w":if(m.x<=0&&(0>=d||f&&(0>=p||c>=s))){g=!1;break}n-=m.x,d+=m.x,f&&(r=n/f,p+=m.Y/2),0>n&&(i="e",n=0);break;case"s":if(m.y>=0&&(c>=s||f&&(0>=d||l>=a))){g=!1;break}r+=m.y,f&&(n=r*f,d-=m.X/2),0>r&&(i="n",r=0);break;case"ne":if(f){if(m.y<=0&&(0>=p||l>=a)){g=!1;break}r-=m.y,p+=m.y,n=r*f}else m.x>=0?a>l?n+=m.x:m.y<=0&&0>=p&&(g=!1):n+=m.x,m.y<=0?p>0&&(r-=m.y,p+=m.y):(r-=m.y,p+=m.y);0>n&&0>r?(i="sw",r=0,n=0):0>n?(i="nw",n=0):0>r&&(i="se",r=0);break;case"nw":if(f){if(m.y<=0&&(0>=p||0>=d)){g=!1;break}r-=m.y,p+=m.y,n=r*f,d+=m.X}else m.x<=0?d>0?(n-=m.x,d+=m.x):m.y<=0&&0>=p&&(g=!1):(n-=m.x,d+=m.x),m.y<=0?p>0&&(r-=m.y,p+=m.y):(r-=m.y,p+=m.y);0>n&&0>r?(i="se",r=0,n=0):0>n?(i="ne",n=0):0>r&&(i="sw",r=0);break;case"sw":if(f){if(m.x<=0&&(0>=d||c>=s)){g=!1;break}n-=m.x,d+=m.x,r=n/f}else m.x<=0?d>0?(n-=m.x,d+=m.x):m.y>=0&&c>=s&&(g=!1):(n-=m.x,d+=m.x),m.y>=0?s>c&&(r+=m.y):r+=m.y;0>n&&0>r?(i="ne",r=0,n=0):0>n?(i="se",n=0):0>r&&(i="nw",r=0);break;case"se":if(f){if(m.x>=0&&(l>=a||c>=s)){g=!1;break}n+=m.x,r=n/f}else m.x>=0?a>l?n+=m.x:m.y>=0&&c>=s&&(g=!1):n+=m.x,m.y>=0?s>c&&(r+=m.y):r+=m.y;0>n&&0>r?(i="nw",r=0,n=0):0>n?(i="sw",n=0):0>r&&(i="ne",r=0);break;case"move":e.left+=m.x,e.top+=m.y,this.renderCanvas(!0),g=!1;break;case"zoom":this.zoom(function(t,i,e,h){var a=O(t*t+i*i),s=O(e*e+h*h);return(s-a)/a}(A(this.startX-this.startX2),A(this.startY-this.startY2),A(this.endX-this.endX2),A(this.endY-this.endY2))),this.startX2=this.endX2,this.startY2=this.endY2,g=!1;break;case"crop":m.x&&m.y&&(t=this.$cropper.offset(),d=this.startX-t.left,p=this.startY-t.top,n=o.minWidth,r=o.minHeight,m.x>0?m.y>0?i="se":(i="ne",p-=r):m.y>0?(i="sw",d-=n):(i="nw",d-=n,p-=r),this.cropped||(this.cropped=!0,this.$cropBox.removeClass(w)))}g&&(o.width=n,o.height=r,o.left=d,o.top=p,this.dragType=i,this.renderCropBox()),this.startX=this.endX,this.startY=this.endY},t.extend(p.prototype,S),p.DEFAULTS={aspectRatio:0/0,autoCropArea:.8,crop:null,preview:"",strict:!0,responsive:!0,checkImageOrigin:!0,modal:!0,guides:!0,highlight:!0,background:!0,autoCrop:!0,dragCrop:!0,movable:!0,resizable:!0,rotatable:!0,zoomable:!0,touchDragZoom:!0,mouseWheelZoom:!0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,dragstart:null,dragmove:null,dragend:null,zoomin:null,zoomout:null},p.setDefaults=function(i){t.extend(p.DEFAULTS,i)},p.TEMPLATE=function(t,i){return i=i.split(","),t.replace(/\d+/g,function(t){return i[t]})}('<0 6="5-container"><0 6="5-canvas"></0><0 6="5-2-9" 3-2="move"></0><0 6="5-crop-9"><1 6="5-view-9"></1><1 6="5-8 8-h"></1><1 6="5-8 8-v"></1><1 6="5-face" 3-2="all"></1><1 6="5-7 7-e" 3-2="e"></1><1 6="5-7 7-n" 3-2="n"></1><1 6="5-7 7-w" 3-2="w"></1><1 6="5-7 7-s" 3-2="s"></1><1 6="5-4 4-e" 3-2="e"></1><1 6="5-4 4-n" 3-2="n"></1><1 6="5-4 4-w" 3-2="w"></1><1 6="5-4 4-s" 3-2="s"></1><1 6="5-4 4-ne" 3-2="ne"></1><1 6="5-4 4-nw" 3-2="nw"></1><1 6="5-4 4-sw" 3-2="sw"></1><1 6="5-4 4-se" 3-2="se"></1></0></0>',"div,span,drag,data,point,cropper,class,line,dashed,box"),p.other=t.fn.cropper,t.fn.cropper=function(i){var a,s=h(arguments,1);return this.each(function(){var e,h=t(this),o=h.data("cropper");o||h.data("cropper",o=new p(this,i)),"string"==typeof i&&t.isFunction(e=o[i])&&(a=e.apply(o,s))}),e(a)?this:a},t.fn.cropper.Constructor=p,t.fn.cropper.setDefaults=p.setDefaults,t.fn.cropper.noConflict=function(){return t.fn.cropper=p.other,this}});
